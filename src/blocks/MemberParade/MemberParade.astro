---
import { ImageParade, ImageParadeItem } from '@components/ImageParade';
import { Grid, Column } from '@components/Grid';
import type { MemberLogoFragment } from '@lib/types/datocms';

export interface Props {
  members: MemberLogoFragment[];
}

const { members } = Astro.props;

const splitArray = (array: MemberLogoFragment[]) => {
  const half = Math.ceil(array.length / 2);
  return [array.slice(0, half), array.slice(half)];
};

const sections = splitArray(members);
---

<Grid border={true}>
  {
    sections.map((section, index) => (
      <Column span={12}>
        <ImageParade direction={index === 0 ? 'left' : 'right'}>
          {section.map((member) => (
            <ImageParadeItem backgroundColor={member.brandColor?.hex}>
              <img src={member.logo?.url} alt={member.logo?.alt} />
            </ImageParadeItem>
          ))}
        </ImageParade>
      </Column>
    ))
  }
</Grid>
